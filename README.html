<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Guide: Elasticsearch Text Embedding Setup</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Slate & Amber -->
    <!-- Application Structure Plan: The application is designed as a single-page, vertical, step-by-step interactive guide. This structure was chosen because the source material is a sequential technical process. A non-linear or dashboard layout would be counter-intuitive. The structure includes: a fixed side navigation/stepper to track progress and allow quick jumping between sections; interactive code blocks with one-click copy functionality to improve developer workflow and reduce errors; and distinct, visually separated cards for each major section (Intro, Prerequisites, Steps 1-3, Usage). This task-oriented flow is the most effective way to present this type of instructional content. -->
    <!-- Visualization & Content Choices: Report Info: The source is a technical guide with text and code snippets. Goal: Guide a developer through a setup process. Viz/Presentation Method: The core information (code snippets) is presented in styled `<code>` blocks. Textual explanations are organized into cards with clear headings. Instead of data charts (which are not applicable here), the key "visualization" is the process itself, represented by the interactive stepper navigation. Interaction: Users can click navigation links to scroll to sections, and an IntersectionObserver automatically highlights the current section in the navigation as they scroll. The most crucial interaction is the "Copy" button for each code block. Justification: This approach directly supports the user's goal: to execute a series of commands. Interactive code blocks are far more useful than static text. Library/Method: Vanilla JavaScript for all interactions (smooth scrolling, copy-to-clipboard, intersection observer). Tailwind CSS for styling. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .code-block {
            position: relative;
        }
        .copy-button {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            padding: 0.25rem 0.5rem;
            background-color: #4A5568;
            color: white;
            border: none;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s ease-in-out, background-color 0.2s ease-in-out;
        }
        .copy-button:hover {
            opacity: 1;
            background-color: #2D3748;
        }
        .nav-link.active {
            background-color: #FBBF24; /* Amber 400 */
            color: #1F2937; /* Gray 800 */
            font-weight: 600;
        }
        .nav-link.active .nav-circle {
            background-color: #1F2937; /* Gray 800 */
            border-color: #1F2937; /* Gray 800 */
        }
        .nav-link.active .nav-text {
            color: #1F2937; /* Gray 800 */
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="container mx-auto">
        <div class="flex flex-col lg:flex-row">

            <!-- Side Navigation -->
            <aside class="lg:w-1/4 lg:sticky lg:top-0 lg:h-screen p-4 sm:p-6 lg:p-8">
                <nav class="space-y-2">
                    <h2 class="text-sm font-bold uppercase text-slate-500 mb-4 tracking-wider">Setup Guide</h2>
                    <a href="#introduction" class="nav-link group flex items-center p-2 rounded-md transition-colors duration-200 hover:bg-slate-200">
                        <span class="nav-circle border-2 border-slate-300 rounded-full w-4 h-4 mr-3 transition-colors duration-200"></span>
                        <span class="nav-text text-slate-600 font-medium">Introduction</span>
                    </a>
                    <a href="#prerequisites" class="nav-link group flex items-center p-2 rounded-md transition-colors duration-200 hover:bg-slate-200">
                        <span class="nav-circle border-2 border-slate-300 rounded-full w-4 h-4 mr-3 transition-colors duration-200"></span>
                        <span class="nav-text text-slate-600 font-medium">Prerequisites</span>
                    </a>
                    <a href="#step1" class="nav-link group flex items-center p-2 rounded-md transition-colors duration-200 hover:bg-slate-200">
                        <span class="nav-circle border-2 border-slate-300 rounded-full w-4 h-4 flex items-center justify-center text-xs font-bold mr-3 transition-colors duration-200">1</span>
                        <span class="nav-text text-slate-600 font-medium">Install Model</span>
                    </a>
                    <a href="#step2" class="nav-link group flex items-center p-2 rounded-md transition-colors duration-200 hover:bg-slate-200">
                        <span class="nav-circle border-2 border-slate-300 rounded-full w-4 h-4 flex items-center justify-center text-xs font-bold mr-3 transition-colors duration-200">2</span>
                        <span class="nav-text text-slate-600 font-medium">Create Endpoint</span>
                    </a>
                    <a href="#step3" class="nav-link group flex items-center p-2 rounded-md transition-colors duration-200 hover:bg-slate-200">
                        <span class="nav-circle border-2 border-slate-300 rounded-full w-4 h-4 flex items-center justify-center text-xs font-bold mr-3 transition-colors duration-200">3</span>
                        <span class="nav-text text-slate-600 font-medium">Create Mapping</span>
                    </a>
                    <a href="#usage" class="nav-link group flex items-center p-2 rounded-md transition-colors duration-200 hover:bg-slate-200">
                        <span class="nav-circle border-2 border-slate-300 rounded-full w-4 h-4 mr-3 transition-colors duration-200"></span>
                        <span class="nav-text text-slate-600 font-medium">Usage</span>
                    </a>
                </nav>
            </aside>

            <!-- Main Content -->
            <main class="w-full lg:w-3/4 p-4 sm:p-6 lg:p-8">
                <header class="mb-12">
                    <h1 class="text-4xl font-bold text-slate-900 mb-2">Elasticsearch Text Embedding Setup</h1>
                    <p class="text-lg text-slate-600">An interactive guide to preparing your Elasticsearch instance for semantic search.</p>
                </header>

                <div class="space-y-16">
                    <!-- Introduction -->
                    <section id="introduction" class="scroll-mt-24">
                        <h2 class="text-2xl font-bold text-slate-900 mb-4">Introduction</h2>
                        <div class="space-y-4 text-slate-700 text-base leading-relaxed">
                            <p>This guide provides a quick and easy way to get started with text embeddings in Elasticsearch. By following the steps outlined, you'll be able to upload a text embedding model, configure an inference endpoint, and create an index that automatically generates embeddings for your content.</p>
                            <p>This prework is essential for any application that requires understanding the semantic meaning of text, such as building a documentation reader, a semantic search engine, or a recommendation system.</p>
                        </div>
                    </section>

                    <!-- Prerequisites -->
                    <section id="prerequisites" class="scroll-mt-24">
                        <h2 class="text-2xl font-bold text-slate-900 mb-4">Prerequisites</h2>
                         <p class="mb-6 text-slate-700">Before you begin, ensure you have the following installed and configured. This setup is designed to be straightforward, assuming these components are in place.</p>
                        <ul class="space-y-4">
                            <li class="flex items-start p-4 bg-white rounded-lg shadow-sm border border-slate-200">
                                <span class="text-amber-500 text-xl font-bold mr-4 mt-1">&#10003;</span>
                                <div>
                                    <h3 class="font-semibold text-slate-800">Elasticsearch Instance</h3>
                                    <p class="text-slate-600">A running Elasticsearch instance is required. Version 8.x or later is recommended to use the `semantic_text` field type and inference features.</p>
                                </div>
                            </li>
                            <li class="flex items-start p-4 bg-white rounded-lg shadow-sm border border-slate-200">
                                <span class="text-amber-500 text-xl font-bold mr-4 mt-1">&#10003;</span>
                                <div>
                                    <h3 class="font-semibold text-slate-800">Sufficient Permissions</h3>
                                    <p class="text-slate-600">You'll need permissions to install models and create indices/inference endpoints on your Elasticsearch instance.</p>
                                </div>
                            </li>
                            <li class="flex items-start p-4 bg-white rounded-lg shadow-sm border border-slate-200">
                                <span class="text-amber-500 text-xl font-bold mr-4 mt-1">&#10003;</span>
                                <div>
                                    <h3 class="font-semibold text-slate-800">HTTP Client</h3>
                                    <p class="text-slate-600">A tool like `curl` or any other HTTP client is needed to interact with the Elasticsearch API.</p>
                                </div>
                            </li>
                        </ul>
                    </section>
                    
                    <!-- Setup Steps -->
                    <section id="setup">
                        <h2 class="text-3xl font-bold text-slate-900 mb-8 border-b pb-4">The 3-Step Setup Process</h2>
                        <div class="space-y-12">

                        <!-- Step 1 -->
                        <div id="step1" class="scroll-mt-24">
                            <div class="flex items-center mb-4">
                                <div class="bg-amber-400 text-slate-900 rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl mr-4">1</div>
                                <h3 class="text-2xl font-bold text-slate-900">Install the Text Embedding Model</h3>
                            </div>
                            <p class="text-slate-700 mb-4">First, the `sentence-transformers__all-minilm-l6-v2` model must be installed in your Elasticsearch instance. This can be done using the provided `upload_model.sh` script, which automates the download and installation process.</p>
                            <div class="code-block bg-slate-800 rounded-lg shadow-lg text-white font-mono text-sm p-4 pt-12">
                                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                <pre><code>./upload_model.sh</code></pre>
                            </div>
                             <p class="text-xs text-slate-500 mt-2">Note: Ensure the script has executable permissions (`chmod +x upload_model.sh`).</p>
                        </div>
                        
                        <!-- Step 2 -->
                        <div id="step2" class="scroll-mt-24">
                            <div class="flex items-center mb-4">
                                <div class="bg-amber-400 text-slate-900 rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl mr-4">2</div>
                                <h3 class="text-2xl font-bold text-slate-900">Create an Inference Endpoint</h3>
                            </div>
                            <p class="text-slate-700 mb-4">Next, create an inference endpoint. This endpoint makes the installed model available to Elasticsearch services, such as the `semantic_text` field type. It defines how the model should be allocated and used for generating embeddings.</p>
                            <div class="code-block bg-slate-800 rounded-lg shadow-lg text-white font-mono text-sm p-4 pt-12">
                                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                <pre><code>PUT _inference/text_embedding/minilm-l6
{
  "service": "elasticsearch",
  "service_settings": {
    "num_allocations": 1,
    "num_threads": 1,
    "model_id": "sentence-transformers__all-minilm-l6-v2" 
  }
}</code></pre>
                            </div>
                        </div>

                        <!-- Step 3 -->
                        <div id="step3" class="scroll-mt-24">
                             <div class="flex items-center mb-4">
                                <div class="bg-amber-400 text-slate-900 rounded-full w-10 h-10 flex items-center justify-center font-bold text-xl mr-4">3</div>
                                <h3 class="text-2xl font-bold text-slate-900">Create an Index Mapping</h3>
                            </div>
                            <p class="text-slate-700 mb-4">Finally, create an index with a `semantic_text` field. This special field type is linked to your inference endpoint and will automatically generate and store embeddings for any text you index into it.</p>
                            <div class="code-block bg-slate-800 rounded-lg shadow-lg text-white font-mono text-sm p-4 pt-12">
                                <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                <pre><code>PUT pdf-documentation-reader
{
  "mappings": {
    "properties": {
      "body": {
        "type": "semantic_text",
        "inference_id": "minilm-l6"
      }
    }
  }
}</code></pre>
                            </div>
                        </div>

                        </div>
                    </section>
                    
                    <!-- Usage -->
                    <section id="usage" class="scroll-mt-24">
                        <h2 class="text-2xl font-bold text-slate-900 mb-4">Ready for Use</h2>
                        <p class="text-slate-700 mb-4">With the setup complete, your index is ready. You can now start indexing documents. Elasticsearch will automatically handle the creation of embeddings for the `body` field, enabling you to perform powerful semantic searches.</p>
                        <div class="code-block bg-slate-800 rounded-lg shadow-lg text-white font-mono text-sm p-4 pt-12">
                            <button class="copy-button" onclick="copyCode(this)">Copy</button>
                            <pre><code>POST pdf-documentation-reader/_doc
{
  "body": "This is a document about setting up Elasticsearch for text embedding. It covers model installation and index mapping."
}</code></pre>
                        </div>
                    </section>

                </div>

                <footer class="mt-16 pt-8 border-t text-center text-slate-500 text-sm">
                    <p>Built from technical documentation. Feel free to contribute to the original project by opening issues or submitting pull requests.</p>
                </footer>
            </main>
        </div>
    </div>

    <script>
        function copyCode(button) {
            const codeBlock = button.nextElementSibling;
            const code = codeBlock.innerText;
            navigator.clipboard.writeText(code).then(() => {
                button.textContent = 'Copied!';
                setTimeout(() => {
                    button.textContent = 'Copy';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy text: ', err);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll('section[id], div[id^="step"]');
            const navLinks = document.querySelectorAll('.nav-link');

            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        
                        let activeLink;
                        if(id.startsWith('step')) {
                           activeLink = document.querySelector(`.nav-link[href="#${id}"]`);
                        } else {
                           activeLink = document.querySelector(`.nav-link[href="#${id}"]`);
                        }
                        
                        navLinks.forEach(link => link.classList.remove('active'));
                        if(activeLink) {
                            activeLink.classList.add('active');
                        }
                    }
                });
            }, { rootMargin: '-30% 0px -70% 0px', threshold: 0 });

            sections.forEach(section => {
                observer.observe(section);
            });
        });
    </script>
</body>
</html>
